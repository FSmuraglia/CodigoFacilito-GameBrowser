{% extends 'common/base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <!-- Título -->
    <h1 class="mb-3">{{ videojuego.titulo }}</h1>

    <div class="row">
        <!-- Portada -->
        <div class="col-md-5">
            {% if videojuego.portada %}
                <img src="{{ videojuego.portada.imagen.url }}" class="img-fluid rounded shadow" alt="Portada de {{ videojuego.titulo }}">
            {% else %}
                <img src="{% static 'img/default.jpg' %}" class="img-fluid rounded shadow" alt="Sin imagen">
            {% endif %}
        </div>

        <!-- Datos del juego -->
        <div class="col-md-7">
            <h5 class="mt-3 mt-md-0">Descripción</h5>
            <p>{{ videojuego.descripcion }}</p>

            <h5>Categorías</h5>
            {% for categoria in videojuego.categorias.all %}
                <span class="badge bg-primary">{{ categoria.nombre }}</span>
            {% empty %}
                <p class="text-muted">Sin categorías</p>
            {% endfor %}

            <p><strong>Año de salida:</strong> {{ videojuego.año_salida }}</p>
            <p><strong>Desarrollador:</strong> {{ videojuego.desarrollador }}</p>

            <p><strong>Plataformas:</strong></p>
            {% for plataforma in videojuego.plataformas.all %}
                <p>{{ plataforma.nombre }}</p>
            {% endfor %}

            <p class="mt-3"><strong>Publicado por el usuario:</strong> {{ videojuego.usuario_creador.username }}</p>
        </div>
    </div>

    <!-- Capturas adicionales -->
    <hr class="my-4">
    <h4>Capturas</h4>
    <div class="row row-cols-2 row-cols-md-4 g-3">
        {% for captura in videojuego.capturas.all %}
            {% if captura.id != videojuego.portada.id %}
                <div class="col">
                    <img src="{{ captura.imagen.url }}" class="img-fluid rounded shadow-sm" alt="Captura adicional">
                </div>
            {% endif %}
        {% empty %}
            <p class="text-muted">Este juego no tiene capturas adicionales.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}